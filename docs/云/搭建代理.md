# 搭建代理

## 申请虚拟机

在云服务商（如阿里云、腾讯云、AWS等）申请一台虚拟机，建议选择亚太区域以获得更好的网络速度。

## 配置

首先建立入站端口规则：

1. AllowHTTPInBound。目标端口号为80，协议为TCP，授权对象为0.0.0.0/0（所有人）。
2. AllowHTTPSInBound。目标端口号为443，协议为TCP，授权对象为0.0.0.0/0（所有人）。
3. AllowSSHInBound。目标端口号为22，协议为TCP，授权对象为0.0.0.0/0（所有人）。

然后通过SSH连接到虚拟机，安装v2ray-agent脚本：

```bash
sudo -i
wget -P /root -N --no-check-certificate "https://raw.githubusercontent.com/mack-a/v2ray-agent/master/install.sh" && chmod 700 /root/install.sh && /root/install.sh
```

## 协议

### VLESS

选择 2. 任意组合安装 -> 1. Xray-core -> 7. VLESS+Reality+uTLS+Vision -> 随机UUID -> 随机用户名 -> 端口 443 -> 目标域名（国内可以访问并且提供国外的IP或者CDN地址），我这里选择了<addons.mozilla.org> -> 自动生成 PrivateKey。

目标域名符合以下条件即可：按F12，“安全”显示使用TLS1.3、X25519，“网络”显示请求协议是h2。

![](https://cdn.jsdelivr.net/gh/cyhkbl/picture_bed@main/target1.png)

![](https://cdn.jsdelivr.net/gh/cyhkbl/picture_bed@main/target2.png)

就可以得到vless链接和配置了，可以将配置明文发给ai让它生成对应的客户端配置。

### VLESS Vision 和 VLESS Reality

为了应对 TLS in TLS 和指纹识别等阻断或封禁的风险，Xray-core 团队推出了 VLESS Vision 和 VLESS Reality 两种新颖的技术方案。它们能够有效地隐藏和保护流量的特征，提高安全性和稳定性。