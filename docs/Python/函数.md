# 函数

对于变量，赋值完成后，修改赋值语句中其他变量的值，这个变量的值不会因为别的变量改变而自动变化；对于函数，同一个函数 f() ，因为它内部用到了外部变量 a、b 等等，改变这些变量后，再调用函数，返回值就可能变。

## 重名

有重名时，先检查本地（局部）帧（框架），再检查全局帧（框架）。例如：

```python
def square(square):
    return square * square

x=square(3)  # 返回 9，这里把3传给了局部变量square，再调用square()函数
```

当一个内置函数名称与变量名称冲突时，优先使用变量。例如：

```python
def max(x, y):
    if x > y:
        return x
    return y

max = 42
print(max(1, 2))  # 输出 42
```

内置函数可以作为另一个内置函数的变量名。例如：`max=min`，调用max(1,2)时会调用min函数。

## 多重返回值

return语句可以返回多个值。例如：

```python
>>> def divide_exact(n, d):
...    return n // d, n % d
>>> quotient, remainder = divide_exact(2013, 10)
```

## 高阶函数：接受另一个函数作为参数的函数

### 函数作为形参

在具有多个形参的函数A中，某些形参可能是函数B。在调用函数A时，一定会自动执行函数B。例如：

```python
def if_(c, t, f):
    if c:
        return t
    else:
        return f

from math import sqrt

def real_sqrt(x):
    """Return the real part of the square root of x."""
    return if_(x >= 0, sqrt(x), 0)
```

在执行`return if_(x >= 0, sqrt(x), 0)`时，函数`if_`会被调用，并且参数`t`会被求值为`sqrt(x)`。这意味着如果`x`是负数，`sqrt(x)`仍然会被计算，从而导致报错。

### 函数作为返回值

```python
def make_adder(n):
    """Return a function that takes one argument k and returns k + n."""
    def adder(k):
        return k + n
    return adder
```

想计算4 + 3，可以调用`make_adder(3)(4)`

`adder`的父级是`make_adder`，`make_adder`的父级是全局帧。

## 环境图

函数：`func <name> (param) [parent= <parent>]`

调用时，从子级向上，例如上面的代码从`adder`向上找到`make_adder`，再从`make_adder`向上找到全局帧。

当函数被调用时，会创建一个新的局部帧，绑定它的父级为定义该函数时所在的帧，传递参数（当前帧的变量），执行函数。

## Lambda 函数

lambda函数是匿名函数，可以看作是高阶函数的特例。例如：`square = lambda x: x * x`，此时square被绑定为了x的平方这样一个函数。也可以直接用`(lambda x:x * x)(3)`，直接调用lambda函数。